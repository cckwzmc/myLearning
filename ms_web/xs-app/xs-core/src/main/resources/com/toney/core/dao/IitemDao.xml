<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xiu.portal.dao.IitemDao">
	<resultMap id="iitemResult" type="iitem">
		<result property="iitemlistId" column="iitemlist_Id"/>
		<result property="catentryId" column="catentry_Id"/>
		<result property="memberId" column="member_id"/>
		<result property="storeentId" column="storeent_id"/>
		<result property="lastupdate" column="lastupdate"/>
		<result property="sequence" column="sequence"/>
		<result property="field1" column="field1"/>
		<result property="field2" column="field2" />
		<result property="field3" column="field3" />
		<result property="sendDate" column="send_date" />
		<result property="optcounter" column="optcounter" />
		<result property="quantity" column="quantity"/>
	</resultMap>
	<select id="getIitemByMemberId"  parameterType="java.util.Map" resultMap="iitemResult">
		<![CDATA[select * from (select t.rownum rn,t.* from (select t.catentry_id,t.iitemlist_id,t.sequence,t.member_id,t.storeent_id,t.quantity,t.iitemlist_id,t.lastupdate,t.field1,t.field2 
		from iitem t  where t.member_id=#{memberId}#  order by t.lastupdate desc) t WHERE rownum <= #{endRow}# ) 
        WHERE rn >= #{beginRow}#]]>
	</select>
	<select id="getIitemCountByMemberId" parameterType="java.lang.Long">
		select count(1)  from iitem t  where t.member_id=#{memberId}# 
	</select>
	<select id="getIitemByIitemListId" parameterType="java.lang.Long">
		<![CDATA[select t.catentry_id,t.iitemlist_id,t.sequence,t.member_id,t.storeent_id,t.quantity,t.iitemlist_id,t.lastupdate,t.field1,t.field2 
		from iitem t  where t.iitemlist_id=#iitemlistId# order by t.lastupdate desc]]>
	</select>
</mapper>