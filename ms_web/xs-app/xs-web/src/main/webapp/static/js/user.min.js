
var Dialog={};Dialog.state=0;Dialog.center=function(id)
{var e=document.getElementById(id);if(e!=null)
{var scrollTop=document.documentElement.scrollTop+parseInt((document.documentElement.clientHeight+jQuery(e).height())/2);e.style.top=scrollTop+"px";e.style.left="50%";e.style.marginTop="-"+parseInt(jQuery(e).height())+"px";e.style.marginLeft="-"+parseInt(jQuery(e).width()/2)+"px";}};Dialog.open=function(id)
{var e=document.getElementById(id);var top=jQuery(document).scrollTop();var left=jQuery(document).scrollLeft();var width=document.documentElement.scrollWidth+"px";var height=document.documentElement.scrollHeight+"px";var scrollTop=top+parseInt((document.documentElement.clientHeight+jQuery(e).height())/2)+"px";var cssText="display: none; width: "+width+"; height:"+height+"; position: absolute; left: 0px; top: 0px; z-index: 9990; background: #efefef;";if(document.all)
{cssText+="filter: alpha(opacity=40);";}
else
{cssText+=" opacity:0.4;";}
var mark=document.getElementById("mark");if(mark!=null&&mark.style.display=="block")
{this.state--;}
if(mark!=null)
{mark.style.cssText=cssText;}
else
{mark=document.createElement("div");mark.id="mark";mark.style.cssText=cssText;document.body.appendChild(mark);var html=["<iframe frameborder=\"0\" scrolling=\"no\""," style=\"top: 0px; left: 0px;"," width: "+width+"; height: "+height+";"," border: 0px solid #5183dc; background-color: transparent; z-index: 9991; overflow: hidden;\""," src=\"about:blank\"></iframe>"].join("");mark.innerHTML=html;var frame=mark.childNodes[0].contentWindow.document;frame.open("text/html");frame.write("<html><head><title>mark</title></head><body style=\"background-color: #000000;\"></body></html>");frame.close();}
mark.style.display="block";if(e!=null)
{e.style.cssText="position: absolute; display: block; left: 50%; top: "+scrollTop+"; margin-left: -"+parseInt(jQuery(e).width()/2)+"px; margin-top: -"+parseInt(jQuery(e).height())+"px; z-index: 9999;";}
this.state++;};Dialog.close=function(id)
{var e=document.getElementById(id);var mark=document.getElementById("mark");if(e!=null)
{e.style.display="none";}
if(this.state<=1&&mark!=null)
{mark.style.display="none";}
this.state--;};Dialog.login=function(id,callback)
{this.open(id);jQuery(jQuery("#"+id).find("div.tabtitle span").get(0)).click();var form1=jQuery("#"+id).find("form[name=login_form]");var form2=jQuery("#"+id).find("form[name=register_form]");jQuery(form1).login(function(response){if(response.code==0)
{Dialog.close(id);if(callback!=null)
{callback(response);}}
else
{alert(response.message);}});jQuery(form2).register(function(response){if(response.code==0)
{Dialog.close(id);if(callback!=null)
{callback(response);}}
else
{alert(response.message);}});};Dialog.register=function(id,callback)
{this.open(id);jQuery(jQuery("#"+id).find("div.tabtitle span").get(1)).click();var form1=jQuery("#"+id).find("form[name=login_form]");var form2=jQuery("#"+id).find("form[name=register_form]");jQuery(form1).login(function(response){if(response.code==0)
{Dialog.close(id);if(callback!=null)
{callback(response);}}
else
{alert(response.message);}});jQuery(form2).register(function(response){if(response.code==0)
{Dialog.close(id);if(callback!=null)
{callback(response);}}
else
{alert(response.message);}});};var PageContext={};jQuery.fn.extend({register:function(callback)
{document.ondblclick=null;document.onmousedown=null;document.onkeyup=null;var form=jQuery(this);var userName=form.find("input[name=userName]");var password=form.find("input[name=password]");var repassword=form.find("input[name=rePassword]");var email=form.find("input[name=email]");var nickName=form.find("input[name=nickName]");var captchatxt=form.find("input[name=captcha]");var captchaimg=form.find("img.captcha_img");var captchabtn=form.find(".captcha_btn");var licence=form.find("input[name=licence]");var paylicence=form.find("input[name=paylicence]");var submit=form.find("input[name=register]");userName.val("");captchatxt.val("");if(form.attr("RegisterEvent")!="true")
{form.attr("RegisterEvent","true");form.submit(function(){alert(1);return false;});userName.blur(function(){var src=jQuery(this);var bind=src.attr("bind");var value=jQuery.trim(src.val());var showMessage=function()
{var result=src.attr("result");if(result=="?")
{form.find(".userNameMessage").attr("class","userNameMessage introduce").html("正在检查用户名，请稍候。。。");}
else if(result=="T")
{form.find(".userNameMessage").attr("class","userNameMessage introduce").html("输入正确！");}
else if(result=="F")
{src.attr("result","F");form.find(".userNameMessage").attr("class","userNameMessage prompt").html("用户名不符合注册规则！");}
else if(result=="Y")
{src.attr("result","Y");form.find(".userNameMessage").attr("class","userNameMessage prompt").html("此用户名已被占用！");}
else if(result=="N")
{form.find(".userNameMessage").attr("class","userNameMessage prompt").html("网络错误，请稍候重试！");}
else
{form.find(".userNameMessage").attr("class","userNameMessage introduce").html("英文(不区分大小写)、数字结合，不能以数字开头，6-16个字符。");}};if(value.length<1)
{src.attr("bind","");src.attr("result","0");showMessage();}
else if(value!=bind)
{src.attr("bind",value);src.attr("result","?");showMessage();jQuery.ajax({type:"GET",url:"http://passport.zongheng.com/checkUserName.do?userName="+encodeURIComponent(value)+"&callback=?",dataType:"jsonp",error:function(req)
{src.attr("result","N");showMessage();},success:function(data)
{src.attr("result",data);showMessage();}});}
else
{showMessage();}});userName.focus(function(){form.find(".userNameMessage").attr("class","userNameMessage introduce").html("英文(不区分大小写)、数字结合，不能以数字开头，6-16个字符。");});password.blur(function(){var src=jQuery(this);var value=jQuery.trim(src.val());src.attr("result","0");if(value.length<1)
{return;}
if(value.length<6||value.length>16)
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码长度6—16位字符！");return;}
if(value==jQuery.trim(userName.val()))
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码不能和用户名相同！");return;}
if(value.match(/^[a-zA-Z0-9]{6,16}$/g)==null)
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码由a-z的不限大小写英文字母或0-9的数字组成！");return;}
src.attr("result","T");form.find(".passwordMessage").attr("class","passwordMessage introduce").html("密码输入格式正确！");return;});password.keyup(function(){var src=jQuery(this);var value=jQuery.trim(src.val());var length=value.length;if(length<6||length>16)
{form.find(".passwordSuggestion").empty();form.find(".passwordSuggestion").append("<em>无效</em>");return;}
src.attr("result","T");var hasNumber=function(word)
{for(var i=0;i<word.length;i++)
{var charCode=word.charCodeAt(i);if(charCode>=48&&charCode<=58)
{return true;}}
return false;};var hasCLetter=function(word)
{for(var i=0;i<word.length;i++)
{var charCode=word.charCodeAt(i);if(charCode>=65&&charCode<=90)
{return true;}}
return false;}
var hasSLetter=function(word)
{for(var i=0;i<word.length;i++)
{var charCode=word.charCodeAt(i);if(charCode>=97&&charCode<=122)
{return true;}}
return false;};var isNum=hasNumber(value);var isCLet=hasCLetter(value);var isSLet=hasSLetter(value);if(isNum&&!isCLet&&!isSLet)
{form.find(".passwordSuggestion").empty();form.find(".passwordSuggestion").append("<em class=\"red\">低</em>");}
else if(length>12&&isNum&&isCLet&&isSLet)
{form.find(".passwordSuggestion").empty();form.find(".passwordSuggestion").append("<em class=\"green\">高</em>");}
else
{form.find(".passwordSuggestion").empty();form.find(".passwordSuggestion").append("<em class=\"blue\">中</em>");}});repassword.blur(function(){var src=jQuery(this);var value=jQuery.trim(src.val());if(password.attr("result")=="T")
{if(value.length<1)
{return;}
if(value!=jQuery.trim(password.val()))
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码不一致，请重新输入！");}
else
{src.attr("result","T");form.find(".passwordMessage").attr("class","passwordMessage introduce").html("密码输入一致！");}}});email.blur(function(){var src=jQuery(this);var bind=src.attr("bind");var value=jQuery.trim(src.val());var reg=/^([\w.])+\@(([\w])+\.)[a-zA-Z0-9]{2,}/;if(!reg.test(value))
{form.find(".emailMessage").attr("class","emailMessage prompt").html("请输入正确邮箱地址！");return;}
var showMessage=function()
{var result=src.attr("result");if(result=="?")
{form.find(".emailMessage").attr("class","emailMessage introduce").html("正在检查邮箱地址，请稍候。。。");}
else if(result=="T")
{form.find(".emailMessage").attr("class","emailMessage introduce").html("邮箱输入正确！");}
else if(result=="F")
{src.attr("result","F");form.find(".emailMessage").attr("class","emailMessage prompt").html("此邮箱已使用，请更换其他邮箱！");}
else if(result=="N")
{form.find(".emailMessage").attr("class","emailMessage prompt").html("网络错误，请稍候重试！");}
else
{form.find(".emailMessage").attr("class","emailMessage introduce").html("请输入有效的邮件地址，当密码遗失时凭此领取。");}};if(value.length<1)
{src.attr("bind","");src.attr("result","0");showMessage();}
else if(value!=bind)
{src.attr("bind",value);src.attr("result","?");showMessage();jQuery.ajax({type:"GET",url:"http://passport.zongheng.com/checkEmail.do?email="+encodeURIComponent(value)+"&callback=?",dataType:"jsonp",error:function(req)
{src.attr("result","N");showMessage();},success:function(data)
{src.attr("result",data);showMessage();}});}
else
{showMessage();}});email.focus(function(){form.find(".emailMessage").attr("class","emailMessage introduce").html("请输入有效的邮件地址，当密码遗失时凭此领取。");});nickName.blur(function(){var src=jQuery(this);var bind=src.attr("bind");var value=jQuery.trim(src.val());var showMessage=function()
{var result=src.attr("result");if(result=="?")
{form.find(".nickNameMessage").attr("class","nickNameMessage introduce").html("正在检查昵称，请稍候。。。");}
else if(result=="T")
{form.find(".nickNameMessage").attr("class","nickNameMessage introduce").html("输入正确！");}
else if(result=="F")
{form.find(".nickNameMessage").attr("class","nickNameMessage prompt").html("纵横昵称不符合注册规则！");}
else if(result=="Y")
{form.find(".nickNameMessage").attr("class","nickNameMessage prompt").html("此纵横昵称已经被占用！");}
else if(result=="N")
{form.find(".nickNameMessage").attr("class","nickNameMessage prompt").html("网络错误，请稍候重试！");}
else
{form.find(".nickNameMessage").attr("class","nickNameMessage introduce").html("纵横中文网唯一身份标识，中英文均可，不超过6个汉字或12个字符。");}};if(value.length<1)
{src.attr("bind","");src.attr("result","0");showMessage();}
else if(value!=bind)
{src.attr("bind",value);src.attr("result","?");showMessage();jQuery.ajax({type:"GET",url:"http://passport.zongheng.com/checkNickName.do?nickName="+encodeURIComponent(value)+"&callback=?",dataType:"jsonp",error:function(req)
{src.attr("result","N");showMessage();},success:function(data)
{src.attr("result",data);showMessage();}});}
else
{showMessage();}});nickName.focus(function(){form.find(".nickNameMessage").attr("class","nickNameMessage introduce").html("纵横中文网唯一身份标识，中英文均可，不超过6个汉字或12个字符。");});captchatxt.focus(function(){if(jQuery.trim(userName.val())!="")
{if(captchaimg.attr("status")!="1")
{captchaimg.show();captchabtn.show();captchaimg.attr("status","1");captchaimg.css({"width":"100px","height":"40px"});captchaimg.attr("src","http://passport.zongheng.com/registerValidateImage?r="+Math.random());}}});captchabtn.click(function(){if(jQuery.trim(userName.val())!="")
{captchaimg.show();captchaimg.attr("src","http://passport.zongheng.com/registerValidateImage?r="+Math.random());}
return false;});captchaimg.click(function(){jQuery(this).attr("src","http://passport.zongheng.com/registerValidateImage?r="+Math.random());});submit.unbind();submit.click(function(){if(jQuery.trim(userName.val())=="")
{form.find(".userNameMessage").attr("class","userNameMessage prompt").html("用户名不能为空！");return false;}
if(jQuery.trim(nickName.val())=="")
{form.find(".nickNameMessage").attr("class","nickNameMessage prompt").html("昵称不能为空！");return false;}
if(jQuery.trim(password.val())=="")
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码不能为空！");return false;}
if(jQuery.trim(repassword.val())=="")
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("确认密码不能为空！");return false;}
if(jQuery.trim(password.val())!=jQuery.trim(repassword.val()))
{form.find(".passwordMessage").attr("class","passwordMessage prompt").html("密码不一致！");return false;}
if(jQuery.trim(userName.attr("result"))!="T")
{return false;}
if(jQuery.trim(nickName.attr("result"))!="T")
{return false;}
if(jQuery.trim(email.attr("result"))!="T")
{return false;}
if(jQuery.trim(captchatxt.val())=="")
{alert("请输入验证码！");return false;}
if(licence.attr("checked")!=true||paylicence.attr("checked")!=true)
{return false;}
if(form.attr("async")!="true")
{jQuery(this).attr("disabled","true");form.find("input[name=location]").val("");form.attr("method","post");form.attr("action","http://passport.zongheng.com/register.do");form.get(0).submit();}
else
{window.callback=null;var request={method:"post",action:"http://passport.zongheng.com/register.do",parameters:{"userName":jQuery.trim(userName.val()),"password":jQuery.trim(password.val()),"rePassword":jQuery.trim(repassword.val()),"email":jQuery.trim(email.val()),"nickName":jQuery.trim(nickName.val()),"captcha":jQuery.trim(captchatxt.val()),"redirect":"http://"+window.location.host+"/callback.jsp"}};var iframe=document.getElementById("proxyframe");if(iframe!=null)
{var handler=function(code,message)
{if(code==null&&message==null)
{return;}
if(code==0)
{window.user=getUserFromCookie();if(window.UserManager!=null)
{UserManager.trigger(window.user);}
if(callback!=null)
{callback({"code":code,"message":message});}}
else
{alert(message);}
captchatxt.val("");captchabtn.click();};window.proxyFrameLoaded=function()
{var w=iframe.contentWindow.window;if(w.JForm!=null&&w.JForm.submit!=null)
{window.callback=handler;w.JForm.submit(request);}
else
{window.callback=null;}};iframe.src="http://"+window.location.host+"/jform.html";}}
return false;});}},login:function(callback)
{jQuery.isZhUser="-";document.ondblclick=null;document.onmousedown=null;document.onkeyup=null;var form=jQuery(this);var userName=form.find("input[name=username]");var password=form.find("input[name=passwd]");var randText=form.find("input[name=rand]");var captcha=form.find("img.change_img");var loginBtn=form.find("input[name=login]");userName.focus();randText.val("");if(form.attr("IsSetupEvent")!="true")
{form.attr("IsSetupEvent","true");var keydown=function(event)
{event.stopPropagation();if(event.keyCode==13)
{loginBtn.click();}};userName.unbind();password.unbind();randText.unbind();captcha.unbind();loginBtn.unbind();userName.click(function(event){event.stopPropagation();});password.click(function(event){event.stopPropagation();});randText.click(function(event){event.stopPropagation();});captcha.click(function(event){event.stopPropagation();});loginBtn.click(function(event){event.stopPropagation();});userName.blur(function(){var value=jQuery(this).val();var oldval=jQuery(this).attr("oldval");if(value!=null&&jQuery.trim(value).length>0&&value!=oldval)
{jQuery(this).attr("oldval",value);password.val("");form.getCaptcha(true);}});randText.focus(function(){var value=userName.val();jQuery(document).keydown(keydown);if(value!=null&&jQuery.trim(value).length>0)
{if(jQuery.isZhUser==="-")
{form.getCaptcha(true);}}});randText.blur(function(){jQuery(document).unbind("keydown",keydown);});captcha.click(function(){form.getCaptcha(false);});jQuery("a.change_img_btn").click(function(){form.getCaptcha(false);});form.find(".free_registe_btn").attr("href","http://passport.zongheng.com?location="+encodeURIComponent(location.href));}
loginBtn.unbind("click");loginBtn.click(function(){if(userName.val()=="")
{alert("请输入登录用户名");return;}
if(password.val()=="")
{alert("请输入密码");return;}
if(randText.val()=="")
{alert("请输入验证码");return;}
var loc=form.find("input[name=location]");if(loc.val()==null||jQuery.trim(loc.val()).length<1)
{loc.val(window.location.href);}
var action="http://passport.zongheng.com/ajaxLogin.do";var data={"username":userName.val(),"passwd":password.val(),"rand":randText.val(),"target":"PageContext.returnValue"};var parameters=[];for(var i in data)
{parameters[parameters.length]=i+"="+encodeURIComponent(data[i]);}
if((action.indexOf("?")>-1)||(action.indexOf("&")>-1)||(action.indexOf("#")>-1))
{action=action+"&"+parameters.join("&");}
else
{action=action+"?"+parameters.join("&");}
jQuery.getScript(action,function(){window.user=getUserFromCookie();var returnValue=PageContext.returnValue;if(returnValue==null)
{returnValue={"code":-1,"message":"登录失败，请重新登录 !"};}
if(returnValue.code==0)
{UserManager.trigger(window.user);}
else
{randText.val("");form.getCaptcha(false);}
if(callback!=null)
{callback(returnValue);}});});},getCaptcha:function(check)
{var form=this;var userName=form.find("input[name=username]");if(userName.val()==null||jQuery.trim(userName.val()).length<1)
{return false;}
if(check==true)
{jQuery.getScript("http://passport.zongheng.com/checkNativeUser.do?userName="+userName.val(),function(){if(jQuery.isZhUser!="Y")
{if(window.confirm("此用户不存在，是否要注册纵横用户？"))
{window.location="http://passport.zongheng.com/reg.do?location="+window.location.href;}
else
{userName.focus();}}});}
var action="http://passport.zongheng.com/ajaxLogin.do";var image="http://passport.zongheng.com/validateImage?r="+(new Date()).getTime();form.attr("action",action);form.find("img.randimg").attr("src",image).hide().show();form.find("input[name=rand]").val("");return true;}});function Listener()
{this.listeners=[];}
Listener.prototype.addListener=function(listener)
{this.listeners[this.listeners.length]=listener;};Listener.prototype.removeListener=function(listener)
{var listeners=this.listeners;if(listeners!=null)
{var index=-1;for(var i=0,length=listeners.length;i<length;i++)
{if(listener==listeners[i])
{index=i;break;}}
if(index>-1)
{for(var i=index,length=listeners.length-1;i<length;i++)
{listeners[i]=listeners[i+1];}
listeners[listeners.length-1]=null;listeners.length=listeners.length-1;return listener;}}
return null;};Listener.prototype.trigger=function()
{var listeners=this.listeners;if(listeners!=null)
{for(var i=0,length=listeners.length;i<length;i++)
{try
{var flag=listeners[i].apply(this,arguments);if(flag!=null&&flag!=undefined&&flag==false)
{break;}}
catch(e)
{}}}};(function(){if(window.Class==null||window.Class==undefined)
{window.Class={getInstance:function(constructor,parent){return new parent();}};}
if(window.UserManager==null||window.UserManager==undefined)
{window.UserManager=Class.getInstance(null,Listener);window.UserManager.login=function(id)
{};window.UserManager.logout=function(reload)
{window.user=null;jQuery.cookie("logon",null,{expires:-1,path:"/",domain:".zongheng.com",secure:true});if(reload!=false)
{window.location.reload();}
else
{window.UserManager.trigger(null);}};window.UserManager.build=function(user)
{var a=[];if(user!=null&&user!=undefined)
{a[a.length]="<a id=\"userInfoBtn\"><em><\/em>";a[a.length]="<div>"+user.nickName+"<span class=\"i_vote\">（<font color=\"#cc0000\" id=\"userVote\">0</font>）</span><\/div>";a[a.length]="<label><\/label>";a[a.length]="<\/a>";a[a.length]="<a class=\"asign\" target=\"_blank\" href=\"http://home.zongheng.com\" title=\"个人中心\"><em></em><div>个人中心</div><label></label></a>";a[a.length]="<a class=\"abook\" target=\"_blank\" href=\"http://home.zongheng.com\/favoritesBook.do\" title=\"我的书架\"><em><\/em>";a[a.length]="<div>书架<\/div>";a[a.length]="<label><\/label>";a[a.length]="<\/a>";a[a.length]="<a class=\"amsg\" target=\"_blank\" href=\"http://home.zongheng.com\/msgIn.do\" title=\"我的短信息\"><em><\/em>";a[a.length]="<div>（<font color=\"#cc0000\" id=\"userMsg\">0<\/font>）<\/div>";a[a.length]="<label><\/label>";a[a.length]="<\/a>";a[a.length]="<a class=\"aout header_logout\"><span><\/span><label><\/label><\/a>";}
else
{a[a.length]="<a id=\"userLogin\" class=\"alogin\"><em><\/em><span><\/span><label><\/label><\/a>";a[a.length]="<a class=\"areg header_reg\"><span><\/span><label><\/label><\/a>";}
return a.join("");};}
if(window.UserInfoManager==null||window.UserInfoManager==undefined)
{window.UserInfoManager=Class.getInstance(null,Listener);window.UserInfoManager.bind=function(userInfo)
{if(userInfo!=null&&userInfo.ret==true)
{this.userInfo=userInfo;this.trigger(userInfo);}};window.UserInfoManager.load=function(force)
{if(this.userInfo==null||this.userInfo==undefined||force==true)
{jQuery.getScript("http://www.zongheng.com/ajax/user.info.do?callback=window.UserInfoManager.bind");}
else
{this.trigger(this.userInfo);}};window.UserInfoManager.fixed=function(userInfo)
{if(userInfo.type==null)
{userInfo.type=0;}
if(isNaN(parseInt(userInfo.type)))
{userInfo.type=0;}
if(userInfo.level==null)
{userInfo.level=1;}
if(isNaN(parseInt(userInfo.level)))
{userInfo.level=1;}
userInfo.level=parseInt(userInfo.level);if(userInfo.userLevelScore==null||isNaN(userInfo.userLevelScore))
{userInfo.userLevelScore=0;}
else
{userInfo.userLevelScore=parseInt(userInfo.userLevelScore);}
if(userInfo.nextUserLevelScore==null||isNaN(userInfo.nextUserLevelScore))
{userInfo.nextUserLevelScore=100;}
else
{userInfo.nextUserLevelScore=parseInt(userInfo.nextUserLevelScore);}
if(userInfo.userLevelScore<=0)
{userInfo.userLevelScore=0;}
if(userInfo.nextUserLevelScore<=0)
{userInfo.nextUserLevelScore=100;}
var percent=(userInfo.userLevelScore/userInfo.nextUserLevelScore);if(isNaN(percent)||percent<0)
{percent=0.0;}
if(percent>1.0)
{percent=1.0;}
userInfo.percent=percent;return userInfo;};window.UserInfoManager.build=function(userInfo)
{var a=[];if(userInfo!=null)
{this.fixed(userInfo);var width=Math.floor(userInfo.percent*160);a[a.length]="<div class=\"topuser\"></div>";a[a.length]="<a href=\"http://home.zongheng.com\" title=\"头像\" class=\"userimg\">";a[a.length]="<img src=\""+userInfo.image+"\"><\/img>"
a[a.length]="<\/a>";a[a.length]="<div class=\"right\">";a[a.length]="<h2><a href=\"http://home.zongheng.com\" class=\"f33\">"+user.nickName+"<\/a>"
if(userInfo.type==1)
{a[a.length]="<span title=\"VIP1级用户\" class=\"level_vip1 va_b\"></span>";}
else if(userInfo.type==2)
{a[a.length]="<span title=\"VIP2级用户\" class=\"level_vip2 va_b\"></span>";}
else if(userInfo.type==3)
{a[a.length]="<span title=\"VIP3级用户\" class=\"level_vip3 va_b\"></span>";}
else if(userInfo.type==4)
{a[a.length]="<span title=\"VIP4级用户\" class=\"level_vip4 va_b\"></span>";}
else if(userInfo.type==5)
{a[a.length]="<span title=\"VIP5级用户\" class=\"level_vip5 va_b\"></span>";}
a[a.length]="<\/h2>";a[a.length]="<div class=\"spline\"><\/div>";a[a.length]="<p>头衔：<span>"+userInfo.level_title+"<\/span>"+UserInfoManager.getUserLevelIcons(userInfo.level)+"<\/p>";a[a.length]="<div class=\"dj\"><span class=\"all\" title=\""+userInfo.userLevelScore+"/"+(userInfo.userLevelScore<userInfo.nextUserLevelScore?userInfo.nextUserLevelScore:"无")+"\"><span class=\"now\" style=\"width: "+width+"px\"></span></span>"+Math.floor(userInfo.percent*100)+"%</div>";a[a.length]="<p>推荐票：<span>"+userInfo.recomment+"<\/span><\/p>";a[a.length]="<p>纵横币：<span class=\"qian\">"+userInfo.money+"<em>&nbsp;<\/em><\/span><a href=\"http://home.zongheng.com/show/charge.html\" class=\"forg\" title=\"充值\">[充值]<\/a><\/p>";a[a.length]="<\/div>";}
return a.join("");};window.UserInfoManager.getUserLevelIcons=function(level)
{var icons=[];if(level!=null)
{level=parseInt(level);if(isNaN(level)==false&&level>0)
{level=(level<=21?level:21);var sun=Math.floor(level/16);var moon=Math.floor((level-sun*16)/4);var star=(level-sun*16-moon*4);icons[icons.length]="<span class=\"leval\" title=\"用户等级："+level+"级\">";for(var i=0;i<sun;i++)
{icons[icons.length]="<span class=\"level_sun\"></span>";}
for(var i=0;i<moon;i++)
{icons[icons.length]="<span class=\"level_moon\"></span>";}
for(var i=0;i<star;i++)
{icons[icons.length]="<span class=\"level_star\"></span>";}
icons[icons.length]="</span>";}}
return icons.join("");};window.UserInfoManager.getUserInfo=function()
{return this.userInfo;};window.UserInfoManager.serialize=function(json)
{var a=[];if(json!=null)
{if(typeof(json)=="object")
{for(var name in json)
{var value=json[name];var className=typeof(value);if(value!=null)
{if(className=="object"&&value.length!=null)
{for(var j=0;j<value.length;j++)
{if(value[j]!=null)
{a[a.length]=encodeURIComponent(name)+"="+encodeURIComponent(value[j]);}}}
else
{a[a.length]=encodeURIComponent(name)+"="+encodeURIComponent(value.toString());}}}}}
return a.join("&");};}})();